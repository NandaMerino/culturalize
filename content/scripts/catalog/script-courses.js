let baseURL = "https://west-devs.github.io/West-Devs-entrega-final-Culturalize";

let CURSOS = [
    {
        id: 1,
        url_img: baseURL + "/content/imgs/01-Cursos/01-Cursos-Desenho/cursos-desenho1.jpg",
        nome: "#Curso de Desenho",
        data: "22-04-2023 14:30",
        modalidade: "Online",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel1.jpg",
        categoria: "desenho"
    },
    {
        id: 2,
        url_img: baseURL + "/content/imgs/01-Cursos/01-Cursos-Desenho/cursos-desenho2.jpg",
        nome: "#Curso de Desenho",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel1.jpg",
        categoria: "desenho"
    },
    {
        id: 3,
        url_img: baseURL + "/content/imgs/01-Cursos/01-Cursos-Desenho/cursos-desenho3.jpg",
        nome: "#Curso de Desenho",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel2.jpg",
        categoria: "desenho"
    },
    {
        id: 4,
        url_img: baseURL + "/content/imgs/01-Cursos/01-Cursos-Desenho/cursos-desenho4.jpg",
        nome: "#Curso de Desenho",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "desenho"
    },
    {
        id: 5,
        url_img: baseURL + "/content/imgs/01-Cursos/01-Cursos-Desenho/cursos-desenho5.jpg",
        nome: "#Curso de Desenho",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel1.jpg",
        categoria: "desenho"
    },
    {
        id: 6,
        url_img: baseURL + "/content/imgs/01-Cursos/02-Cursos-Pintura/cursos-pintura1.jpg",
        nome: "#Curso de Pintura",
        data: "22-04-2023 14:30",
        modalidade: "Online",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel1.jpg",
        categoria: "pintura"
    },
    {
        id: 7,
        url_img: baseURL + "/content/imgs/01-Cursos/02-Cursos-Pintura/cursos-pintura2.jpg",
        nome: "#Curso de Pintura",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "pintura"
    },
    {
        id: 8,
        url_img: baseURL + "/content/imgs/01-Cursos/02-Cursos-Pintura/cursos-pintura3.jpg",
        nome: "#Curso de Pintura",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel2.jpg",
        categoria: "pintura"
    },
    {
        id: 9,
        url_img: baseURL + "/content/imgs/01-Cursos/02-Cursos-Pintura/cursos-pintura4.jpg",
        nome: "#Curso de Pintura",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel2.jpg",
        categoria: "pintura"
    },
    {
        id: 10,
        url_img: baseURL + "/content/imgs/01-Cursos/02-Cursos-Pintura/cursos-pintura5.jpg",
        nome: "#Curso de Pintura",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel1.jpg",
        categoria: "pintura"
    },
    {
        id: 11,
        url_img: baseURL + "/content/imgs/01-Cursos/03-Cursos-Escultura/cursos-escultura1.jpg",
        nome: "#Curso de Escultura",
        data: "22-04-2023 14:30",
        modalidade: "Online",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel1.jpg",
        categoria: "escultura"
    },
    {
        id: 12,
        url_img: baseURL + "/content/imgs/01-Cursos/03-Cursos-Escultura/cursos-escultura2.jpg",
        nome: "#Curso de Escultura",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "escultura"
    },
    {
        id: 13,
        url_img: baseURL + "/content/imgs/01-Cursos/03-Cursos-Escultura/cursos-escultura3.jpg",
        nome: "#Curso de Escultura",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "escultura"
    },
    {
        id: 14,
        url_img: baseURL + "/content/imgs/01-Cursos/04-Cursos-Ceramica/cursos-ceramica1.jpg",
        nome: "#Curso de Cerâmica",
        data: "22-04-2023 14:30",
        modalidade: "Online",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel1.jpg",
        categoria: "ceramica"
    },
    {
        id: 15,
        url_img: baseURL + "/content/imgs/01-Cursos/04-Cursos-Ceramica/cursos-ceramica2.jpg",
        nome: "#Curso de Cerâmica",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "ceramica"
    },
    {
        id: 16,
        url_img: baseURL + "/content/imgs/01-Cursos/04-Cursos-Ceramica/cursos-ceramica3.jpg",
        nome: "#Curso de Cerâmica",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel2.jpg",
        categoria: "ceramica"
    },
    {
        id: 17,
        url_img: baseURL + "/content/imgs/01-Cursos/04-Cursos-Ceramica/cursos-ceramica4.jpg",
        nome: "#Curso de Cerâmica",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel2.jpg",
        categoria: "ceramica"
    },
    {
        id: 18,
        url_img: baseURL + "/content/imgs/01-Cursos/05-Cursos-Teatro/cursos-teatro1.jpg",
        nome: "#Curso de Teatro",
        data: "22-04-2023 14:30",
        modalidade: "Online",
        nivel: "Nível: ",
        url_nivel: baseURL + "./content/imgs/01-Cursos/nivel1.jpg",
        categoria: "teatro"
    },
    {
        id: 19,
        url_img: baseURL + "/content/imgs/01-Cursos/05-Cursos-Teatro/cursos-teatro2.jpg",
        nome: "#Curso de Teatro",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "teatro"
    },
    {
        id: 20,
        url_img: baseURL + "/content/imgs/01-Cursos/05-Cursos-Teatro/cursos-teatro3.jpg",
        nome: "#Curso de Teatro",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel2.jpg",
        categoria: "teatro"
    },
    {
        id: 21,
        url_img: baseURL + "/content/imgs/01-Cursos/06-Cursos-Danca/cursos-danca1.jpg",
        nome: "#Curso de Dança",
        data: "22-04-2023 14:30",
        modalidade: "Online",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel1.jpg",
        categoria: "danca"
    },
    {
        id: 22,
        url_img: baseURL + "/content/imgs/01-Cursos/06-Cursos-Danca/cursos-danca2.jpg",
        nome: "#Curso de Dança",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "danca"
    },
    {
        id: 23,
        url_img: baseURL + "/content/imgs/01-Cursos/06-Cursos-Danca/cursos-danca3.jpg",
        nome: "#Curso de Dança",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "danca"
    },
    {
        id: 24,
        url_img: baseURL + "/content/imgs/01-Cursos/07-Cursos-Musica/cursos-musica1.jpg",
        nome: "#Curso de Música",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "musica"
    },
    {
        id: 25,
        url_img: baseURL + "/content/imgs/01-Cursos/07-Cursos-Musica/cursos-musica2.jpg",
        nome: "#Curso de Música",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "musica"
    },
    {
        id: 26,
        url_img: baseURL + "/content/imgs/01-Cursos/07-Cursos-Musica/cursos-musica3.jpg",
        nome: "#Curso de Música",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "./content/imgs/01-Cursos/nivel3.jpg",
        categoria: "musica"
    },
    {
        id: 27,
        url_img: baseURL + "/content/imgs/01-Cursos/07-Cursos-Musica/cursos-musica4.jpg",
        nome: "#Curso de Música",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "musica"
    },
    {
        id: 28,
        url_img: baseURL + "/content/imgs/01-Cursos/07-Cursos-Musica/cursos-musica5.jpg",
        nome: "#Curso de Música",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "musica"
    },
    {
        id: 29,
        url_img: "./content/imgs/01-Cursos/07-Cursos-Musica/cursos-musica6.jpg",
        nome: "#Curso de Música",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: "./content/imgs/01-Cursos/nivel3.jpg",
        categoria: "musica"
    },
    {
        id: 30,
        url_img: baseURL + "/content/imgs/01-Cursos/07-Cursos-Musica/cursos-musica7.jpg",
        nome: "#Curso de Música",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "musica"
    },
    {
        id: 31,
        url_img: baseURL + "/content/imgs/01-Cursos/07-Cursos-Musica/cursos-musica8.jpg",
        nome: "#Curso de Música",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "musica"
    },
    {
        id: 32,
        url_img: baseURL + "/content/imgs/01-Cursos/07-Cursos-Musica/cursos-musica9.jpg",
        nome: "#Curso de Música",
        data: "22-04-2023 14:30",
        modalidade: "Presencial",
        nivel: "Nível: ",
        url_nivel: baseURL + "/content/imgs/01-Cursos/nivel3.jpg",
        categoria: "musica"
    }
]
let allCoursesButtons = document.getElementById("courses-article-button");

let desenhoButton = document.createElement("button");
desenhoButton.textContent = "Desenho";
desenhoButton.id = "desenho";
desenhoButton.addEventListener("click", function () {
    coursesFilter("desenho");
})

let pinturaButton = document.createElement("button");
pinturaButton.textContent = "Pintura";
pinturaButton.id = "pintura";
pinturaButton.addEventListener("click", function () {
    coursesFilter("pintura")
})

let esculturaButton = document.createElement("button");
esculturaButton.textContent = "Escultura";
esculturaButton.id = "escultura";
esculturaButton.addEventListener("click", function () {
    coursesFilter("escultura");
})

let ceramicaButton = document.createElement("button");
ceramicaButton.textContent = "Cerâmica";
ceramicaButton.id = "ceramica";
ceramicaButton.addEventListener("click", function () {
    coursesFilter("ceramica");
})

let teatroButton = document.createElement("button");
teatroButton.textContent = "Teatro";
teatroButton.id = "teatro";
teatroButton.addEventListener("click", function () {
    coursesFilter("teatro");
})

let dancaButton = document.createElement("button");
dancaButton.textContent = "Dança";
dancaButton.id = "danca";
dancaButton.addEventListener("click", function () {
    coursesFilter("danca");
})

let musicaButton = document.createElement("button");
musicaButton.textContent = "Música";
musicaButton.id = "musica";
musicaButton.addEventListener("click", function () {
    coursesFilter("musica");
})

allCoursesButtons.appendChild(desenhoButton);
allCoursesButtons.appendChild(pinturaButton);
allCoursesButtons.appendChild(esculturaButton);
allCoursesButtons.appendChild(ceramicaButton);
allCoursesButtons.appendChild(teatroButton);
allCoursesButtons.appendChild(dancaButton);
allCoursesButtons.appendChild(musicaButton);

function mostrarCursos(cursos) {
    let allCourses = document.getElementById("section-all-courses");
    allCourses.innerHTML = ""; // limpa o conteúdo e exibe os eventos filtrados

    for (let i = 0; i < cursos.length; i++) {
        let coursesArticle = document.createElement("article");
        coursesArticle.className = "article-courses";

        let url_imgCourses = document.createElement("img");
        url_imgCourses.src = cursos[i].url_img;
        url_imgCourses.className = "courses-imgs";
        url_imgCourses.addEventListener("click", function () {
            abrirDetalhesCursos(cursos[i].id);
        });

        let course_description = document.createElement("div");
        course_description.className = "container-courses-description";

        let course_name = document.createElement("h2");
        course_name.textContent = cursos[i].nome;
        course_name.addEventListener("click", function () {
            abrirDetalhesCursos(cursos[i].id);
        })

        let course_date = document.createElement("p");
        course_date.textContent = cursos[i].data;



        let course_nivel_container = document.createElement("div");
        course_nivel_container.className = "course_nivel_container";

        let container_course_alinhamento = document.createElement("div");
        container_course_alinhamento.className = "container_couse_alinhamento";

        let course_modalidade = document.createElement("p");
        course_modalidade.textContent = "Modalidade: " + cursos[i].modalidade;

        let container_course_alinhamento_nivel = document.createElement("div");
        container_course_alinhamento_nivel.className = "container_course_alinhamento_nivel";

        let course_nivel = document.createElement("p");
        course_nivel.textContent = cursos[i].nivel;

        let url_nivelCourses = document.createElement("img");
        url_nivelCourses.src = cursos[i].url_nivel;
        url_nivelCourses.className = "courses-nivel-imgs";


        allCourses.appendChild(coursesArticle);
        coursesArticle.appendChild(url_imgCourses);
        coursesArticle.appendChild(course_description);
        course_description.appendChild(course_name);
        course_description.appendChild(course_date);
        course_description.appendChild(course_nivel_container);
        course_nivel_container.appendChild(container_course_alinhamento);
        container_course_alinhamento.appendChild(course_modalidade);
        course_nivel_container.appendChild(container_course_alinhamento_nivel);
        container_course_alinhamento_nivel.appendChild(course_nivel);
        container_course_alinhamento_nivel.appendChild(url_nivelCourses);
    }
}

function coursesFilter(categoria) {
    let coursesFilter = CURSOS.filter(function (filtrarCurso) {
        let buttons = document.querySelectorAll("#courses-article-button button");
        buttons.forEach(d => {
            d.classList.remove("change-color");
        });
        let button = document.getElementById(categoria);
        button.classList.add("change-color"); // criação da classe "change-color" para mudar a cor do botão
        return filtrarCurso.categoria === categoria;
    });

    mostrarCursos(coursesFilter); // função para filtrar os eventos após o clique no botão
}

function abrirDetalhesCursos(curso_id) {
    let cursoDetalhes = DETALHES_CURSOS.find(function (curso) {
        return curso.id === curso_id;
    });

    if (cursoDetalhes) {
        let detalhesCursoUrlImg = cursoDetalhes.url_img;
        let detalhesCursoNome = cursoDetalhes.nome;
        let detalhesCursoDescricao = cursoDetalhes.descricao;
        let detalhesCursoProfessor = cursoDetalhes.professor;
        let detalhesCursoFormato = cursoDetalhes.formato;
        let detalhesCursoData = cursoDetalhes.data;
        let detalhesCursoTurmas = cursoDetalhes.turmas;
        let detalhesCursoHorario = cursoDetalhes.horario;
        let detalhesCursoValor = cursoDetalhes.valor;

        let novaPagina = window.open("", "_blank");
        novaPagina.document.write(`
        <html lang="en">
        <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=, initial-scale=1.0">
        <title>Culturalize</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link rel="stylesheet" href="https://west-devs.github.io/West-Devs-entrega-final-Culturalize/content/styles/catalog/courses.css">
        </head>
        <body class="body-courses-details">
            <header>

            </header>
            <main>
                <section class="section-courses-details">
                <img class="details-courses-img" src="${detalhesCursoUrlImg}" alt="${detalhesCursoNome}">
                <article class="article-courses-details">
                <h2>${detalhesCursoNome}</h2>
                <p class="text-course-details">${detalhesCursoDescricao}</p>
                <div class="container-course-details">
                    <div class="container-first-course-details">
                        <p>
                        <span class="material-symbols-outlined">person</span>
                        Professor(a): ${detalhesCursoProfessor}
                        </p>
                        <p>
                        <span class="material-symbols-outlined">calendar_month</span>
                        Data de início: ${detalhesCursoData}
                        </p>
                        <p>
                        <span class="material-symbols-outlined">schedule</span>
                        Horário: ${detalhesCursoHorario}
                        </p>
                    </div>
                    <div class="container-second-course-details">
                        <p>
                        <span class="material-symbols-outlined">other_houses</span>
                        Formato: ${detalhesCursoFormato}
                        </p>
                        <p>
                        <span class="material-symbols-outlined">groups</span>
                        Turma: ${detalhesCursoTurmas}
                        </p>
                        <p>
                        <span class="material-symbols-outlined">sell</span>
                        Valor: ${detalhesCursoValor}
                        </p>
                    </div>
                </div>
                <div class="container-button-courses-details">
                    <button>Inscreva-se</button>
                </div>
            </main>
            <footer>   

            </footer>
        </body>
        </html>
        `)
        novaPagina.document.close();
    }
}

mostrarCursos(CURSOS); // mostra todos os curso (sem filtro)